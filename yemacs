#!/bin/bash2
# $Id$

# Prevent emacs bugs from consing all memory and thrashing the system until
# linux decides to start nuking other processes for more space.
#ulimit -Sd 65535
ulimit -Sd 262144

builddirs='
   /fs/u2/sys/emacs-21-build/current/src
   /fs/u3/sys/emacs-21-build/current/src
   /fs/u1/scratch/src/emacs/build/current/src
'

for dir in $builddirs; do
  if [ -d "$dir" ]; then
    ydir=`cd $dir && /bin/pwd`
    test -e $ydir/-emacs || ln -s emacs $ydir/-emacs
    PATH=$ydir:$PATH
    export PATH
    exec -l emacs ${1+"$@"}
  fi
done

exec emacs ${1+"$@"}
