#!/bin/bash
# $Id: yemacs,v 1.4 2004/02/14 21:22:12 friedman Exp $

# Prevent emacs bugs from consing all memory and thrashing the system until
# linux decides to start nuking other processes for more space.
#ulimit -Sd 65535
#ulimit -Sd 262144

builddirs='
   /export/src/emacs/build/current/src
   /fs/u3/sys/emacs-21-build/current/src
'

progname=yemacs
case $1 in
  -login ) progname=-emacs; shift ;;
esac

for dir in $builddirs; do
  if [ -d $dir ]; then
    ydir=`cd $dir && /bin/pwd`
    test -e $ydir/$progname || ln -s emacs $ydir/$progname
    PATH=$ydir:$PATH
    export PATH
  fi

  exec -a $progname emacs "$@"
done

exec emacs "$@"

# eof
